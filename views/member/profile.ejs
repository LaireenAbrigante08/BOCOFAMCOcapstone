<%- include('../partials/membersidebar') %>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f8f9fa;
            padding: 20px;
        }
        .profile-container {
            max-width: 800px;
            margin: 0 auto;
            background: #fff;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        .profile-header {
            text-align: center;
            margin-bottom: 30px;
        }
        .profile-header h1 {
            margin: 0;
            font-size: 2.5rem;
            color: #333;
            font-weight: 600;
        }
        .profile-header p {
            margin: 5px 0;
            color: #777;
            font-size: 1.1rem;
        }
        .profile-picture {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            margin: 0 auto 20px;
            display: block;
            border: 4px solid #007bff;
        }
        .section-title {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: #333;
            font-weight: 600;
            border-bottom: 2px solid #007bff;
            padding-bottom: 5px;
        }
        .profile-details p {
            margin: 10px 0;
            color: #555;
            font-size: 1rem;
        }
        .profile-details strong {
            color: #333;
            font-weight: 600;
        }
        .profile-section {
            margin-bottom: 30px;
        }
        .profile-section:last-child {
            margin-bottom: 0;
        }
        .profile-details p {
            padding-left: 10px;
            border-left: 3px solid #007bff;
        }
        .form-step {
            display: none;
        }
        .form-step.active {
            display: block;
        }
        .form-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        .form-navigation button {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            background-color: #007bff;
            color: #fff;
            cursor: pointer;
        }
        .form-navigation button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }
    </style>
</head>
<body>
    <%- include('../partials/membersidebar') %>
    <div class="profile-container">
        <!-- Profile Header -->
        <div class="profile-header">
            <% if (member.profile_picture) { %>
                <img src="<%= member.profile_picture %>" alt="Profile Picture" class="profile-picture">
            <% } else { %>
                <img src="/images/default-profile.png" alt="Default Profile Picture" class="profile-picture">
            <% } %>
            <h1><%= member.first_name %> <%= member.middle_name %> <%= member.last_name %></h1>
            <p><%= member.cooperative_position %></p>
        </div>

        <!-- Multi-Step Form -->
        <form id="profileForm">
            <!-- Step 1: Personal Information -->
            <div class="form-step active" id="step1">
                <h2 class="section-title">Personal Information</h2>
                <div class="profile-details">
                    <p><strong>CB Number:</strong> <%= member.cb_number %></p>
                    <p><strong>Date of Birth:</strong> <%= member.dob %></p>
                    <p><strong>Gender:</strong> <%= member.gender %></p>
                    <p><strong>Civil Status:</strong> <%= member.civil_status %></p>
                    <p><strong>Age:</strong> <%= member.age %></p>
                    <p><strong>Place of Birth:</strong> <%= member.place_of_birth %></p>
                    <p><strong>Nationality:</strong> <%= member.nationality %></p>
                    <p><strong>Religion:</strong> <%= member.religion %></p>
                    <p><strong>Address:</strong> <%= member.address %></p>
                    <p><strong>Contact Number:</strong> <%= member.contact_number %></p>
                    <p><strong>Email:</strong> <%= member.email %></p>
                </div>
            </div>

            <!-- Step 2: Family Information -->
            <div class="form-step" id="step2">
                <h2 class="section-title">Family Information</h2>
                <div class="profile-details">
                    <p><strong>Spouse Name:</strong> <%= member.spouse_name %></p>
                    <p><strong>Spouse Age:</strong> <%= member.spouse_age %></p>
                    <p><strong>Spouse Occupation:</strong> <%= member.spouse_occupation %></p>
                    <p><strong>Father's Name:</strong> <%= member.father_name %></p>
                    <p><strong>Mother's Name:</strong> <%= member.mother_name %></p>
                    <p><strong>Parent's Address:</strong> <%= member.parent_address %></p>
                    <p><strong>Number of Children:</strong> <%= member.number_of_children %></p>
                    <p><strong>Children Info:</strong> <%= member.children_info %></p>
                </div>
            </div>

            <!-- Step 3: Educational Background -->
            <div class="form-step" id="step3">
                <h2 class="section-title">Educational Background</h2>
                <div class="profile-details">
                    <p><strong>Educational Attainment:</strong> <%= member.educational_attainment %></p>
                    <p><strong>Elementary School:</strong> <%= member.elementary_school %></p>
                    <p><strong>Elementary Address:</strong> <%= member.elementary_address %></p>
                    <p><strong>Elementary Year Graduated:</strong> <%= member.elementary_year_graduated %></p>
                    <p><strong>Secondary School:</strong> <%= member.secondary_school %></p>
                    <p><strong>Secondary Address:</strong> <%= member.secondary_address %></p>
                    <p><strong>Secondary Year Graduated:</strong> <%= member.secondary_year_graduated %></p>
                    <p><strong>College School:</strong> <%= member.college_school %></p>
                    <p><strong>College Address:</strong> <%= member.college_address %></p>
                    <p><strong>College Year Graduated:</strong> <%= member.college_year_graduated %></p>
                    <p><strong>Vocational School:</strong> <%= member.vocational_school %></p>
                    <p><strong>Vocational Address:</strong> <%= member.vocational_address %></p>
                    <p><strong>Vocational Year Graduated:</strong> <%= member.vocational_year_graduated %></p>
                </div>
            </div>

            <!-- Step 4: Employment and Income -->
            <div class="form-step" id="step4">
                <h2 class="section-title">Employment and Income</h2>
                <div class="profile-details">
                    <p><strong>Occupation:</strong> <%= member.occupation %></p>
                    <p><strong>Other Income:</strong> <%= member.other_income %></p>
                    <p><strong>Annual Income:</strong> <%= member.annual_income %></p>
                </div>
            </div>

            <!-- Step 5: Cooperative Information -->
            <div class="form-step" id="step5">
                <h2 class="section-title">Cooperative Information</h2>
                <div class="profile-details">
                    <p><strong>Membership Date:</strong> <%= member.membership_date %></p>
                    <p><strong>Cooperative Position:</strong> <%= member.cooperative_position %></p>
                    <p><strong>Recruited By:</strong> <%= member.recruited_by %></p>
                    <p><strong>Signature:</strong> <%= member.signature %></p>
                    <p><strong>Signed Date:</strong> <%= member.signed_date %></p>
                </div>
            </div>

            <!-- Step 6: Emergency Contact -->
            <div class="form-step" id="step6">
                <h2 class="section-title">Emergency Contact</h2>
                <div class="profile-details">
                    <p><strong>Emergency Contact Name:</strong> <%= member.emergency_contact_name %></p>
                    <p><strong>Emergency Contact Address:</strong> <%= member.emergency_contact_address %></p>
                    <p><strong>Relation:</strong> <%= member.relation %></p>
                </div>
            </div>

            <!-- Step 7: Agrarian Information -->
            <div class="form-step" id="step7">
                <h2 class="section-title">Agrarian Information</h2>
                <div class="profile-details">
                    <p><strong>Agrarian Beneficiary:</strong> <%= member.agrarian_beneficiary %></p>
                    <p><strong>Farm Area:</strong> <%= member.farm_area %></p>
                    <p><strong>Farm Type:</strong> <%= member.farm_type %></p>
                    <p><strong>Is Tenant:</strong> <%= member.is_tenant %></p>
                </div>
            </div>

            <!-- Form Navigation -->
            <div class="form-navigation">
                <button type="button" id="prevBtn" disabled>Previous</button>
                <button type="button" id="nextBtn">Next</button>
            </div>
        </form>
    </div>

    <!-- Bootstrap JS for optional interactivity -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        let currentStep = 1;
        const totalSteps = 7;

        function showStep(step) {
            document.querySelectorAll('.form-step').forEach((section, index) => {
                section.classList.toggle('active', index + 1 === step);
            });

            document.getElementById('prevBtn').disabled = step === 1;
            document.getElementById('nextBtn').disabled = step === totalSteps;
        }

        document.getElementById('nextBtn').addEventListener('click', () => {
            if (currentStep < totalSteps) {
                currentStep++;
                showStep(currentStep);
            }
        });

        document.getElementById('prevBtn').addEventListener('click', () => {
            if (currentStep > 1) {
                currentStep--;
                showStep(currentStep);
            }
        });

        // Initialize the first step
        showStep(currentStep);
    </script>
